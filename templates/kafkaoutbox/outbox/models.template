// Code generated by Boiler; DO NOT EDIT.
package kafkaoutbox

import (
  {{- range .OutboxModelsPackages}}
  {{.ImportAlias}} "{{.ImportLine}}"
  {{- end}}
)

const (
  CreateActionTyp ActionTyp = 1
  UpdateActionTyp ActionTyp = 2
  DeleteActionTyp ActionTyp = 3
)

var actionTypString = map[ActionTyp]string{
  CreateActionTyp: "create",
  UpdateActionTyp: "update",
  DeleteActionTyp: "delete",
}

type ActionTyp int32

type Record struct {
  ID          string     `db:"id"`
  ActionTyp   ActionTyp  `db:"action_typ"`
  JSONOut     []byte     `db:"json_out"`
  LockedUntil *time.Time `db:"locked_until"`
  CreatedAt   time.Time  `db:"created_at"`
}

func (r *Record) IsLocked() bool {
  return r.LockedUntil != nil && time.Now().UTC().Before(*r.LockedUntil)
}

func (t ActionTyp) String() string {
  actionTyp, ok := actionTypString[t]
  if !ok {
    return "unknown"
  }
  return actionTyp
}
